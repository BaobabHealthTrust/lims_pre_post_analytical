
  <%= javascript_include_tag "jquery" %>
  <%= javascript_include_tag "bootstrap" %>
  <%= stylesheet_link_tag "bootstrap.min" %>
  <%= stylesheet_link_tag "extras/footer" %>

<style type="text/css">
	
	#barcode-txt {
  border-color: black;
  border-style: solid;
  border-width: 0 0 1px;
  font-size: 30px;
  margin: 3% 4%;
  width: 60%
}	

</style>
<div style=" height: 97%;" >

	<div class="row">
		<div class="col-sm-4" style="height: 32%; margin-top: 1%; margin-left: 2%;
			 background: -moz-linear-gradient(right,rgba(62, 69, 81, 0.7),rgba(62, 69, 81, 0.3)); 
			 box-shadow: 10px 10px 5px lightgrey; border-radius: 2%;">

			<h1 style="color: white;text-shadow: 2px 2px 4px #000000;">LIMS Order Entry</h1>
				<p style="color: black;text-shadow: 2px 2px 4px #000000; font-weight:bold;">Facility Name <br/>
					<span class="color:white;" style="">Kawale Health Centre</span></p>

					<p style="color: black;text-shadow: 2px 2px 4px #000000;;font-weight:bold;">Ward/Location <br/>
					<span class="text-white" style=""><%= session[:ward] %></span>
				</p>

		</div>

		<div class="col-sm-7" style="margin-top: 1%;">
			<div class="row">	
					<div class="col-sm-8">
						
				
					</div>
					<div class="col-sm-4">
						<div class="panel panel-default" style="color: red;box-shadow: 10px 10px 5px lightgrey;">
							<h4 style="text-align: center;"> Viewing User Special Roles</h4>
						</div>
						
					</div>
			</div>
			<div class="row" style="margin-top: 5.7%;">
				<div class="col-sm-4">
					<div class="panel panel-default" style="color: orange;box-shadow: 10px 10px 5px lightgrey;">
						<div  class="panel-heading" style="color: #1c2a48 ; font-weight:bold; text-align: center;">Orders with No Results</div>
						<div class="panel-body" style="font-size: 2em;font-weight:bold; text-align: center;">1000 </div>
					</div>
				</div>

				<div class="col-sm-4">
					<div class="panel panel-default" style="color:lightgreen;box-shadow: 10px 10px 5px lightgrey;">
						<div  class="panel-heading" style="color: #1c2a48 ; font-weight:bold; text-align: center;">Samples Not Drawn</div>
						<div class="panel-body" style="font-size: 2em; font-weight:bold; text-align: center;">1000 </div>
					</div>
				</div>

				<div class="col-sm-4">
					<div class="panel panel-default" style="color: blue;box-shadow: 10px 10px 5px lightgrey;">
						<% undispatched_sample_count = session[:un_dis_sample] %>
								<% if undispatched_sample_count >0 %>
									<div  class="panel-heading" style="color:red; font-weight:bold; text-align: center;">Samples Not dispatched</div>
									<div class="panel-body" style="font-size: 2em; color:red; font-weight:bold; text-align: center;">
										<%= undispatched_sample_count %></div>
								<% else %>
									<div  class="panel-heading" style="color:#1c2a48; font-weight:bold; text-align: center;">Not dispatched</div>
									<div class="panel-body" style="font-size: 2em; color:#1c2a48; font-weight:bold; text-align: center;">
									<%= undispatched_sample_count %></div>
								<% end %>

					</div>
				</div>
			</div>
		</div>
	</div>








	<div class="row">
		<div style="border: thick solid lightgrey; height: 55%;margin-left: 2%;margin-right: 2%; margin-top: 1%;
		overflow: auto;
		">
			<div class="col-sm-offset-2 col-sm-8 col-sm-offset-2" style="text-align: center; background-color: #eeeeee; border-bottom: thick solid #eeeeee; padding-bottom: 5px;padding-top: 5px; margin-bottom: 10px;">
				<span>
					<input id="search" placeholder="enter Username" class="input" type="text" name="search_username">
				</span>
				<span>
					<button class="btn btn-primary btn-lg"
					 onmousedown="search_user(document.getElementById('search').value)" > search</button>
				</span>

			</div>
			<div id="sub1" class="col-sm-offset-2 col-sm-8 col-sm-offset-2" style="overflow-x: 10px; display: none;">
				<div class="col-sm-4">	
					<table class="table">
						<tbody>
							<tr>
								<td style="background-color: #eeeeee;">Username:</td>
								<td id="username_control"></td>
							</tr>	
							<tr>
								<td style="background-color: #eeeeee;">Designation:</td>
								<td id="designation_control"></td>
							</tr>
						</tbody>
					</table>
			    </div>
			    <div class="col-sm-2">	
					<table class="table">
						<tbody>
							<tr>
								<td style="background-color: #eeeeee;">Designation Roles:</td>					
							</tr>					
						</tbody>
					</table>
			    </div>
			     <div class="col-sm-6">	
					<table class="table">
									
										<tr >
											<td id="frst">										
											</td>
											<td id="sec">									
											</td>
											<td id="thrd">									
											</td>
										</tr>
										<tr>																	
											<td id="frth">										
											</td>								
											<td id="fth">										
											</td>							
											<td id="sth">										
											</td>
										</tr>
										<tr>
											<td id="svth">										
											</td>
										</tr>				
					
					</table>
			    </div>
			</div>
			<div id="sub2" class="col-sm-offset-3 col-sm-6 col-sm-offset-3" style="display: none; overflow-x: 10px;height: 40%; overflow:auto; overflow-x: hidden  ">
				<p>Special Roles can assign</p>
				<table class="table">
					<thead style="background-color: #eeeeee;">
						<tr>
							<th>Role</th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>draw sample</td>
							<td><input type="checkbox" name=""></td>
						</tr>
						<tr>
							<td>draw sample</td>
							<td><input type="checkbox" name=""></td>
						</tr>
						<tr>
							<td>draw sample</td>
							<td><input type="checkbox" name=""></td>
						</tr>
						<tr>
							<td>draw sample</td>
							<td><input type="checkbox" name=""></td>
						</tr>
					</tbody>
				</table>
				
			</div>
		</div>
	</div>



</div>


<div class="footer">
  <button class="btn-back btn btn-lg btn-success" onmousedown="document.location='/view_settings'" >Back</button>
  <input style="float: right;" type="button" value="save" class="btn btn-success btn-lg">
</div>

<script type="text/javascript">
	
	function deleteWard(id)
	{	
		var _url = "/delete_ward?ward_id=" + id;
		
		jQuery.ajax({
						async: false,
						url: _url,
						type: 'post',
						success: function(res)
						{
							$(id).remove();							
						},
						error: function(err)
						{
							$(id).remove();							
											
						}
		
		})
	}
	
	function search_user(name)
	{  
		var _url = "/search_by_username?name=" + name;
		var des = document.getElementById("designation_control");
		var use = document.getElementById("username_control");
		var counter =1;
		jQuery.ajax({
						async: false,
						url: _url,
						type: 'post',
						success: function(res,rs)
						{	
							des.innerHTML = res[0][0].designation;
							use.innerHTML = res[0][0].Username;
							document.getElementById("sub1").style.display = "block";
							document.getElementById("sub2").style.display = "block";
							var roles = res[1].toString();
							roles = roles.split(",")
						
							for (var co =0; co<roles.length;co++)
							{   var va = roles[co];
								va = va.split("_");
								if(va[1]=="yes")
								{
									if (counter == 1)
									{
										document.getElementById('frst').innerHTML = va[0];
									}
									else if (counter ==2)
									{
										document.getElementById('sec').innerHTML = va[0];
									}
									else if (counter ==3)
									{
										document.getElementById('thrd').innerHTML = va[0];
									}
									else if (counter ==4)
									{
										document.getElementById('frth').innerHTML = va[0];
									}
									else if (counter ==5)
									{
										document.getElementById('fth').innerHTML = va[0];
									}
									else if (counter ==6)
									{
										document.getElementById('sth').innerHTML = va[0];
									}
									else if (counter ==7)
									{
										document.getElementById('svth').innerHTML = va[0];
									}
									
									counter = counter + 1;
								}								
							}
							counter = 0;

						},
						error: function(err)
						{
							alert("checking");						
											
						}
		
		})
	}

</script>